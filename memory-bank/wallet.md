# –ö–æ—à–µ–ª–µ–∫ (Wallet)

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
**–ö–æ—à–µ–ª–µ–∫** ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤–æ–π –≤–∞–ª—é—Ç–æ–π (–ö—Ä–∏—Å—Ç–∞–ª–ª–∞–º–∏ üíé). –û–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (–≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏/–ø–ª–µ–π—Ç–µ—Å—Ç–∞).

## 2. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
*   **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤.
*   **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, `localStorage` –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö Supabase.
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤–∞–ª—é—Ç—ã.

## 3. –í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Å—Ç—Ä–æ–≥–æ–º "–∫–∞—Ä—Ç–æ—á–Ω–æ–º" —Å—Ç–∏–ª–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –æ–±—â–µ–π —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (Dark Fantasy UI).

*   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
    *   –§–æ–Ω: `zinc-900/95` (–ø–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π, –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π).
    *   –ì—Ä–∞–Ω–∏—Ü–∞: –¢–æ–Ω–∫–∞—è —Ä–∞–º–∫–∞ `zinc-800/50`.
    *   –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ: `rounded-2xl`.
    *   –¢–µ–Ω–∏: `shadow-xl`.
    *   –≠—Ñ—Ñ–µ–∫—Ç—ã: –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —Ä–∞–º–∫–∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è `amber-500/20`.
*   **–ò–∫–æ–Ω–∫–∞:** –≠–º–æ–¥–∑–∏ –∫—Ä–∏—Å—Ç–∞–ª–ª–∞ üíé —Å –∑–∞–¥–Ω–µ–π –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π (`amber-500/10 blur-md`). –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∫–æ–Ω–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.
*   **–¢–µ–∫—Å—Ç:**
    *   –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–ö–û–®–ï–õ–ï–ö": –ú–µ–ª–∫–∏–π, `zinc-500`, uppercase, tracking-wider.
    *   –ó–Ω–∞—á–µ–Ω–∏–µ: –ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç, –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π (`font-mono`), —Ü–≤–µ—Ç `zinc-200`.
*   **–ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞:**
    *   –í—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞.
    *   –ò–∫–æ–Ω–∫–∞: `Trash2` (–∫–æ—Ä–∑–∏–Ω–∞).
    *   –°—Ç–∏–ª—å: –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä—ã–π (`zinc-600`), –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º (`red-400`) —Å —Ñ–æ–Ω–æ–º `red-950/20`.
*   **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `React Portal` (z-index 9999), –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—è –≤–µ—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
    *   –°—Ç–∏–ª—å: –¢–µ–º–Ω–æ–µ –æ–∫–Ω–æ —Å –∫—Ä–∞—Å–Ω—ã–º–∏ –∞–∫—Ü–µ–Ω—Ç–∞–º–∏ (`rose-500`) –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–µ–π –∏–∫–æ–Ω–∫–æ–π.

## 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
*   **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç UI:** `src/components/WalletComponent.tsx`
*   **–õ–æ–≥–∏–∫–∞ (Store):** `src/stores/useWalletStore.ts`
*   **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:** `src/components/ConfirmationModal.tsx`

### –°—Ç–µ–π—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (Zustand)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `zustand` —Å middleware `persist` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ `localStorage`.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `WalletState`:**
```typescript
interface WalletState {
    crystals: number;
    addCrystals: (amount: number) => Promise<void>;
    spendCrystals: (amount: number) => Promise<boolean>;
    resetWallet: () => Promise<void>;
    fetchBalance: () => Promise<void>;
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase
–ú–∞–≥–∞–∑–∏–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:
1.  **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (`set({ crystals: ... })`).
2.  **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `wallets` –≤ Supabase, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
3.  **–ó–∞–≥—Ä—É–∑–∫–∞:** –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ –ë–î (`fetchBalance`).

### –ê–Ω–∏–º–∞—Ü–∏–∏
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `framer-motion`:
*   `AnimatePresence` –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω.
*   –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`opacity`, `y`).
*   –°–∫–µ–π–ª–∏–Ω–≥ –∏–∫–æ–Ω–æ–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏.

## 5. –ü—Ä–∞–≤–∏–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
*   –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –æ–±–Ω–æ–≤–ª—è—Ç—å `src/stores/useWalletStore.ts`.
*   –ü—Ä–∏ —Ä–µ–¥–∏–∑–∞–π–Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ —Å–≤–µ—Ä—è—Ç—å—Å—è —Å `memory-bank/uiDesign.md`.

